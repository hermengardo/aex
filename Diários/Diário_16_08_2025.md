# Diário (01/08/2025) - Detecção de AEX Similares

## Objetivo
- Identificar e agrupar atividades de extensão (AEX) similares ou duplicadas para limpeza dos dados.
- Detectar casos como "EU na USP" e outras atividades com descrições/títulos muito semelhantes.
- Preparar dados agregados para análise manual antes da remoção definitiva.

## Decisões
- **Agregação por NUSP do docente**: supõe que itens repetidos são produzidos pelo mesmo docente responsável.
- **Threshold de similaridade**: corte de 90% de similaridade cossenoidal entre embeddings textuais.
- **Corpus textual**: embeddings gerados da combinação entre título e descrição da atividade.
- **Manter dados agregados**: não eliminar os itens semelhantes automaticamente, mas passa os dados para revisão manual de outro pesquisador.

## Ambiente e dependências

| Dependência  | Uso                                            | Versão    |
| :----------: | :--------------------------------------------: | :-------: |
| `pandas`     | Manipulação de dados tabulares                 | -         |
| `numpy`      | Operações numéricas e matrizes                 | -         |
| `openai`     | API para geração de embeddings                 | -         |
| `scikit-learn` | Cálculo de similaridade cossenoidal           | -         |

## Scripts
- Ambiente: Google Colab (Python 3.11.13)
- **`Embeddings_+_Remoção_de_itens_repetidos.ipynb`**:
  - Carrega dados estruturados de AEX do arquivo `.parquet`
  - Constrói corpus textual combinando título e descrição
  - Gera embeddings usando modelo `text-embedding-3-large` da OpenAI
  - Calcula matriz de similaridade cossenoidal por docente (NUSP)
  - Identifica atividades similares acima do threshold (90%)
  - Agrega dados similares em formato tabular para revisão
  - Salva resultados em `repetidos.csv` e embeddings em `.parquet`

## Metodologia
1. **Construção do corpus**: 
   ```python
   self.data["Corpus"] = (
       self.data["Título da Atividade"].fillna(" ") + " " +
       self.data["Descrição da Atividade"].fillna(" ")
   ).str.strip()
   ```

2. **Geração de embeddings**: Uso da API OpenAI com modelo `text-embedding-3-large` para cada corpus textual.

3. **Cálculo de similaridade**: Matriz de similaridade cossenoidal entre embeddings, agrupada por docente responsável.

4. **Agregação de similares**: Atividades similares são anexadas como colunas adicionais (`Similar_1_`, `Similar_2_`, etc.) à atividade raiz.

## Estrutura de saída
- **Dados agregados**: Cada linha representa uma AEX raiz com suas similares organizadas em colunas.
- **Colunas principais**:
  - `(ROOT)`: Informações da atividade de referência
  - `Similar_N_*`: Título, descrição e ID das atividades similares
